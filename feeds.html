---
layout: page
permalink: /feeds
title: 動態
icon: fa-user
order: 4
---

<div id="modal-create" class="modal logged-in">
    <div class="modal-content">
      <h4>發表文章</h4><br />
      <form id="feeds-form">
        <div class="input-field">
            <label for="title">標題</label>
            <input type="text" id="title" required>
        </div>
        <div class="input-field">
            <label for="content">內容</label>
            <textarea id="content" style="min-height: 150px;" required></textarea>
        </div>
        <button >建立</button>
      </form>
    </div>
</div>


<div class="feeds">

</div>

<script>
// create new guides

    const createForm = document.querySelector('#feeds-form');
    createForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const user = auth.currentUser;
        //console.log(user);
        db.collection('feeds').add({
            title: createForm['title'].value,
            author: user.uid,
            content: createForm['content'].value,
            postedAt: firebase.firestore.Timestamp.now(),
            date: firebase.firestore.Timestamp.now().toDate()
        }).then(() => {
            // close modal and reset form
            createForm.reset();
        }).catch(err => {
            console.log(err.message);
        })

    })
</script>