---
layout: page
permalink: /feeds
title: 動態
icon: fa-comment-dots
order: 4
---

<div id="modal-create" class="modal logged-in">
    <div class="modal-content">
      <form id="feeds-form">
        <div class="input-field">
            <label for="content">在想甚麼呢？</label>
            <textarea id="content" style="min-height: 150px;" required></textarea>
        </div>
        <button >發表</button>
      </form>
    </div>
</div>


<div class="feeds">

</div>

<div class="feeds2">
    <section>
        <div class="row">
            <div class="3u" style="padding: 0px;">
              <img src="https://www.gravatar.com/avatar/${md5(user)}?s=100&d=retro" style="width: 80px;  border-radius: 10px; height: auto; margin-left: 30px;"/>
            </div>
            <div class="9u" style="padding: 0px;">
              <h3 style="padding-top: 10px;">${doc.data().user}</h3>
              <h4 class="date" style="text-align:center; display: inline; padding-top: 10px; padding-left: 5px;">${feed.postedAt.toDate().toString().substring(4,21)}</h4>
            </div>
        </div>
        <div class="row">
            <p style="margin-bottom: 0px; font-size: 1.35em;">${feed.content}</p>
        </div>
    </section>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.1.0/js/md5.js"></script>
<script>
// create new guides

    const createForm = document.querySelector('#feeds-form');
    createForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const user = auth.currentUser;
        //console.log(user);
        db.collection('feeds').add({
            author: user.uid,
            content: createForm['content'].value,
            postedAt: firebase.firestore.Timestamp.now(),
            date: firebase.firestore.Timestamp.now().toDate()
        }).then(() => {
            // close modal and reset form
            createForm.reset();
        }).catch(err => {
            console.log(err.message);
        })

    })
</script>